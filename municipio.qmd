---
format: 
  html:
    include-in-header:
      - text: |
          <link rel="manifest" href="/static/manifest.json">
    include-after-body: 
      file: 'loadserviceworker.html'
--- 

{{< include _dados.qmd >}}
 

::: {.grid .mx-5 .my-3} 

::: {.g-col-12 .g-col-sm-6}

::: { .text-start } 

:::{.mun}

Município

:::
  
:::{.cityfont .fw-bold }

${nomeCidade}

:::
  
:::

:::

:::{.g-col-12 .g-col-sm-6 .d-flex .justify-content-center .justify-content-sm-end .align-self-center}

:::{.fw-bold}

Selecione o ano de pesquisa desejado    

```{ojs}
viewof pesquisa_ano = html`
<select id="pesquisa_ano" class="form-select" >
  <option value="2010" selected>2010</option>
  <option value="2011">2011</option>
  <option value="2012">2012</option>
  <option value="2013">2013</option>
  <option value="2014">2014</option>
  <option value="2015">2015</option>
  <option value="2016">2016</option>
  <option value="2017">2017</option>
  <option value="2018">2018</option>
  <option value="2019">2019</option>
  <option value="2020">2020</option>
</select>
`
```

:::
 

:::

::: 

::: {.fs-2 .fw-bold .mx-5}

Matrículas no Ensino Médio

:::


:::{.grid .mx-5}


::: {.g-col-12 .g-col-md-6}

::: {.mun } 

Por genêro

:::

:::{.d-flex .text-center .flex-column .flex-md-row .gap-3 }
 

::: {.valuebox .flex-fill  .my-2 .rounded-2 .pt-2} 
  Masculino

  ${total_masculina}

  ${total_masculina_porcentagem} %
:::


::: {.valuebox .flex-fill  .my-2  .rounded-2 .pt-2}  
  Feminino

  ${total_feminina}

  ${total_feminina_porcentagem} %
:::


:::

:::


::: {.g-col-12 .g-col-md-6}

::: {.mun } 

Por raça/cor

:::

:::{.d-flex .text-center .flex-column}



:::{.d-flex .justify-content-between .gap-3 .flex-column .flex-md-row}

::: {.valuebox .flex-fill .my-2  .rounded-2 .pt-2} 
  Não declarada

  ${total_naodeclarada}

  ${total_naodeclarada_porcentagem} %
:::

::: {.valuebox .flex-fill .my-2   .rounded-2 .pt-2} 
  Branca
 
  ${total_branca}

  ${total_branca_porcentagem} %
:::


::: {.valuebox .flex-fill .my-2 .rounded-2 .pt-2} 
  Preta

  ${total_preta}

  ${total_preta_porcentagem} %
:::

:::

:::{.d-flex .gap-3 .flex-column .flex-md-row}


::: {.valuebox .flex-fill .my-2 .rounded-2 .pt-2} 
  Parda

  ${total_parda}

  ${total_parda_porcentagem} %
:::


::: {.valuebox  .flex-fill .my-2 .rounded-2 .pt-2} 
  Amarela

  ${total_amarela}

  ${total_amarela_porcentagem} %
:::


::: {.valuebox  .flex-fill  .my-2  .rounded-2 .pt-2} 
  Indígena

  ${total_indigena}

  ${total_indigena_porcentagem} %
:::

::: {.valuebox  .flex-fill .my-2 .rounded-2 .pt-2} 
  Deficiência

  ${total_deficiencia}

  ${total_deficiencia_porcentagem} %
:::

:::


:::


:::

:::


:::{.mx-5 .fs-6 .fw-light}

Fonte: INEP.

:::

::: {.mx-5 .fs-2 .fw-bold}

Gráficos representativos

:::{.grid .pb-3}

:::{id="myChartGroup" .g-col-6}

```{ojs}
  // viavél ?
  // window.addEventListener('resize', function(event) {
  //   updateChart()
  // });

  updateChart =  function (){  
    
      try {
        clearChartGroup("myChartGroup", "myChart", (document.body.clientWidth/2), "400")

        var chart = new chartjs.Chart(document.getElementById('myChart'), {
        type: 'bar',
        data: {
          labels: ['Total', 'Masculina', 'Feminina', 'Não declarada', 'Branca', 'Preta','Parda','Amarela','Indígena','Deficiência'],
          datasets: [{
            label: '',
            data: [dados[0][pesquisa_ano].Total, dados[0][pesquisa_ano].Masculina, dados[0][pesquisa_ano].Feminina, dados[0][pesquisa_ano].Nãodeclarada, dados[0][pesquisa_ano].Branca,  dados[0][pesquisa_ano].Preta,dados[0][pesquisa_ano].Parda,dados[0][pesquisa_ano].Amarela,dados[0][pesquisa_ano].Indígena,dados[0][pesquisa_ano].Deficiência],
            borderWidth: 1
          }]
        },
        options: {
          plugins:{
            title: {
              display: true,
              text:`Matriculas em ${pesquisa_ano}`,
            },
            legend: {
              display: false,
            }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
        });
        } catch (error) {
          console.log(error);
      }    
    return chart;
  }

 updateChart()
 
```

:::

:::{id="tabRendimentoLine" .g-col-6}

Taxas de Rendimento no Ensino Médio

```{ojs}

hideRendimento =  {
  changeVisible("tabRendimentoLine", filtered_rendimento.length != 0);
  changeVisible("tabRendimentoBar", filtered_rendimento.length != 0);
  } 


   updaterendimentoChartLine =  function (){  
      // 
      try {
        clearChartGroup("tabRendimentoLine", "rendimentoChartLine", 320, 320)

        var chart = new chartjs.Chart(document.getElementById('rendimentoChartLine'), {
        type: 'line',
        data: 
        {
          labels: ['2010', '2019'],
          datasets: [
            {
              label: 'Aprovação',
              data: [dados_rendimento["2010"]["TotalGeral"]["Total"].Aprovação, dados_rendimento["2019"]["TotalGeral"]["Total"].Aprovação],
            
            },
            {
              label: 'Reprovação',
              data: [dados_rendimento["2010"]["TotalGeral"]["Total"].Reprovação, dados_rendimento["2019"]["TotalGeral"]["Total"].Reprovação],
              
            },
            {
              label: 'Abandono',
              data: [dados_rendimento["2010"]["TotalGeral"]["Total"].Abandono, dados_rendimento["2019"]["TotalGeral"]["Total"].Abandono],
            }
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins:{
            title: {
              display: true,
              text:'Taxa de rendimento nos anos de 2010 e 2019',
            },
          },
        }
        });
        } catch (error) {
          console.log(error);
      }    
    return chart;
  } 

  updaterendimentoChartLine()


```

:::


:::


:::



{{< include _pagefooter.qmd >}}